<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Select Plan</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: #f5f5f5;
    }
    .plan {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .default {
      border: 2px solid #005b96;
    }
    button {
      background: #005b96;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  {% if message %}
  <p style="color:red;">{{ message }}</p>
  {% endif %}
  <h2>Select a SEEP Plan</h2>
  {% if active and current_plan in plans %}
    <p><strong>Current Plan:</strong> {{ plans[current_plan].name }}</p>
    <form method="post" action="{{ url_for('cancel_plan') }}">
      <button type="submit">Cancel Subscription</button>
    </form>
    <hr>
  {% endif %}
  {% for key, info in plans.items() %}
    <div class="plan{% if key == 'monthly' %} default{% endif %}">
      <h3>{{ info.name }}{% if key == 'monthly' %} (Recommended){% endif %}</h3>
      <p>
        {% if key == 'monthly' %}
          Free 7-day trial, then $14.99 for 30 days → $19.99/month thereafter
          <br><span style="color:green;">Cancel Anytime</span>
        {% else %}
          ${{ '%.2f'|format(info.monthly_price) }}/month billed monthly
          <br><span style="color:red;">Commitment Plan – Cannot Cancel Early</span>
        {% endif %}
      </p>
      <form method="post" action="{{ url_for('select_plan', plan=key) }}">
        <button type="submit">Subscribe Now</button>
      </form>
    </div>
  {% endfor %}
</body>
</html>
